CHAPTER 5
IMPLEMENTATION

5.1 Backend Implementation

The backend of the Multi-Service Platform is built using the Flask microframework for Python. It serves as the RESTful API provider, handling data persistence, business logic, and client requests.

5.1.1 Technology Stack
- **Framework**: Flask (Python)
- **Database ORM**: SQLAlchemy
- **Database**: SQLite (Development) / PostgreSQL (Production ready)
- **CORS**: Flask-CORS for handling Cross-Origin Resource Sharing

5.1.2 Database Schema
The database is normalized and consists of the following key entities:
- **Users**: Stores customer information and wallet balances.
- **Drivers**: Manages driver details, vehicle info, and availability status.
- **Restaurants**: Stores restaurant profiles, cuisine types, and ratings.
- **Menu Items**: Linked to restaurants, defining available food items and prices.
- **Delivery Partners**: Manages delivery personnel for food orders.
- **Rides**: Records ride transactions, linking users, drivers, source, destination, and fare.
- **Orders**: Records food orders, linking users, restaurants, and delivery partners.
- **Order Items**: Junction table for the many-to-many relationship between orders and menu items.
- **Payments**: Tracks transaction history for both rides and orders.
- **Ratings**: Stores feedback and scores for drivers and restaurants.

5.1.3 API Endpoints
The backend exposes a comprehensive set of REST API endpoints for CRUD operations:
- `/api/users/*`: Manage user profiles.
- `/api/drivers/*`: Manage driver registration and status.
- `/api/restaurants/*` & `/api/menu-items/*`: Manage food service entities.
- `/api/rides/*`: Handle ride booking and history.
- `/api/orders/*`: Handle food ordering and processing.
- `/api/analytics/*`: Aggregated data for the admin dashboard.

5.1.4 Key Features
- **Seed Data Generation**: A custom CLI command (`flask seed_db`) populates the database with realistic sample data for testing.
- **Timestamp Serialization**: Custom JSON serialization handles DateTime objects ensuring proper frontend compatibility.
- **Relationship Management**: SQLAlchemy models define foreign key constraints and relationships (e.g., cascading deletes) to maintain data integrity.

5.2 Frontend Implementation

The frontend is a Single Page Application (SPA) developed using Next.js, providing a responsive and interactive user interface for accessing the platform's services.

5.2.1 Technology Stack
- **Framework**: Next.js (React)
- **Styling**: Vanilla CSS (Global styles for a clean, barebones aesthetic)
- **Mapping**: Leaflet.js & React-Leaflet
- **Charting**: Recharts
- **HTTP Client**: Native Fetch API

5.2.2 Key Components & Pages
- **Layout Component**: Implements a persistent navigation bar and footer across all application pages.
- **Dashboard**: The central hub displaying real-time statistics (total users, active rides, revenue) and recent activity tables.
- **Book Ride**: Features an interactive map using Leaflet.js. Users can select source/destination, view available drivers on the map, and book rides with automatic fare calculation.
- **Order Food**: A full e-commerce workflow allowing users to browse restaurants, view dynamic menus, manage a shopping cart, and place orders.
- **Profile**: Displays user personal details, wallet balance, and a history of past rides and orders.
- **Analytics**: An admin-facing view utilizing Recharts to visualize revenue trends, top-performing drivers, and popular restaurants.

5.2.3 Integration Logic
- **State Management**: React `useState` and `useEffect` hooks manage local state and side effects (API calls).
- **API Communication**: A centralized API utility handles HTTP requests to the Flask backend, managing base URLs and error handling.
- **Dynamic Routing**: Next.js routing handles navigation between different functional modules (Rides, Food, Admin).
